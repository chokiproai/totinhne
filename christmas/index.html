<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Merry Christmas ğŸ„</title>

    <!-- GPU Optimization Meta Tags -->
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="force-rendering" content="webkit">
    <meta name="gpu-acceleration" content="enabled">
    <meta name="hardware-acceleration" content="enabled">

    <!-- Fonts -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&display=swap">

    <!-- Styles -->
    <link rel="stylesheet" href="style.css">

    <!-- Three.js & MediaPipe Import Map -->
    <script type="importmap">
        {
            "imports": {
                "three": "https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js",
                "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/",
                "@mediapipe/tasks-vision": "https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.3/+esm"
            }
        }
    </script>
</head>

<body>

    <div id="loader">
        <div class="spinner"></div>
        <div class="loader-text">Äang táº£i...</div>
    </div>

    <div id="canvas-container"></div>

    <div id="ui-layer">
        <h1>Merry Christmas</h1>

        <div class="upload-wrapper">
            <label class="upload-btn">
                ThÃªm áº¢nh
                <input type="file" id="file-input" multiple accept="image/*">
            </label>
            <div class="hint-text" id="hint-text"></div>
        </div>
    </div>

    <div id="webcam-wrapper">
        <video id="webcam" autoplay playsinline></video>
        <canvas id="webcam-preview" style="display:none;"></canvas>
    </div>

    <!-- Christmas Card -->
    <div id="christmas-card">
        <div class="card-title">ğŸ„ Merry Christmas ğŸ„</div>
        <div class="card-message">
            ChÃºc báº¡n má»™t mÃ¹a GiÃ¡ng Sinh<br>
            an lÃ nh, háº¡nh phÃºc vÃ  trÃ n Ä‘áº§y niá»m vui.<br><br>
            May your days be merry and bright! âœ¨
        </div>
        <button class="card-close" id="card-close-btn">ÄÃ³ng</button>
    </div>

    <!-- Guide Overlay -->
    <div id="guide-overlay">
        <div class="guide-content">
            <div class="guide-title">ğŸ“– HÆ°á»›ng Dáº«n Sá»­ Dá»¥ng</div>

            <div class="guide-section">
                <h3><span>ğŸ‘†</span> Cáº£m á»©ng / Chuá»™t</h3>
                <div class="guide-item">KÃ©o Ä‘á»ƒ xoay cÃ¢y thÃ´ng</div>
                <div class="guide-item">Pinch (2 ngÃ³n) / Scroll Ä‘á»ƒ zoom</div>
            </div>

            <div class="guide-divider"></div>

            <div class="guide-section">
                <h3><span>ğŸ“¸</span> áº¢nh ká»· niá»‡m</h3>
                <div class="guide-item">Nháº¥n "ThÃªm áº¢nh" Ä‘á»ƒ thÃªm áº£nh lÃªn cÃ¢y</div>
                <div class="guide-item">áº¢nh sáº½ hiá»ƒn thá»‹ quáº¥n quanh cÃ¢y thÃ´ng</div>
            </div>

            <div class="guide-divider"></div>

            <div class="guide-section" id="guide-keyboard-section">
                <h3><span>âŒ¨ï¸</span> PhÃ­m táº¯t (MÃ¡y tÃ­nh)</h3>
                <div class="guide-item"><b>H</b> â€” áº¨n/hiá»‡n giao diá»‡n</div>
                <div class="guide-item"><b>R</b> â€” Báº­t/táº¯t tá»± xoay</div>
                <div class="guide-item"><b>Space</b> â€” Reset gÃ³c nhÃ¬n</div>
            </div>

            <div class="guide-divider"></div>

            <div class="guide-section">
                <h3><span>âœ‹</span> Äiá»u khiá»ƒn báº±ng tay (Webcam)</h3>
                <div class="guide-item">Náº¯m tay â†’ Hiá»‡n cÃ¢y thÃ´ng</div>
                <div class="guide-item">XÃ²e tay â†’ Bung hiá»‡u á»©ng</div>
                <div class="guide-item">Chá»¥m ngÃ³n tay â†’ Xem áº£nh</div>
            </div>

            <div class="guide-divider"></div>

            <div class="guide-section">
                <h3><span>ğŸµ</span> Nháº¡c ná»n</h3>
                <div class="guide-item">Nháº¥n nÃºt â–¶ gÃ³c pháº£i bÃªn dÆ°á»›i Ä‘á»ƒ báº­t nháº¡c</div>
            </div>

            <div class="guide-divider"></div>

            <div class="guide-section">
                <h3><span>ğŸ†</span> PhÃ¡o Hoa</h3>
                <div class="guide-item">Double-click (PC) hoáº·c giá»¯ lÃ¢u (Mobile) Ä‘á»ƒ báº¯n phÃ¡o hoa</div>
            </div>

            <div class="guide-divider"></div>

            <div class="guide-section">
                <h3><span>ğŸ®</span> ÄÃ¨n Æ¯á»›c</h3>
                <div class="guide-item">Nháº¥n nÃºt â˜† gÃ³c trÃ¡i bÃªn dÆ°á»›i Ä‘á»ƒ tháº£ Ä‘Ã¨n Æ°á»›c</div>
                <div class="guide-item">Viáº¿t Ä‘iá»u Æ°á»›c â†’ tháº£ lÃªn trá»i!</div>
            </div>

            <button class="guide-close-btn" id="guide-close-btn">Báº¯t Äáº§u ğŸ„</button>
        </div>
    </div>

    <!-- Guide Button -->
    <div id="guide-btn" title="HÆ°á»›ng dáº«n">?</div>

    <!-- Wish Lantern Button -->
    <div id="wish-btn" title="Tháº£ Ä‘Ã¨n Æ°á»›c">â˜†</div>

    <!-- Wish Modal -->
    <div id="wish-modal">
        <h3>ğŸ® Tháº£ ÄÃ¨n Æ¯á»›c ğŸ®</h3>
        <input type="text" id="wish-input" placeholder="Nháº­p Ä‘iá»u Æ°á»›c cá»§a báº¡n..." maxlength="60" autocomplete="off">
        <br>
        <button id="wish-send">Tháº£ LÃªn Trá»i âœ¨</button>
    </div>

    <!-- Countdown -->
    <div id="countdown-wrapper">
        <div id="countdown-label">Äáº¿m ngÆ°á»£c Ä‘áº¿n GiÃ¡ng Sinh</div>
        <div id="countdown-timer">--:--:--:--</div>
    </div>

    <!-- Music Control -->
    <div id="music-control" title="Báº­t/Táº¯t Nháº¡c">
        <svg id="music-icon-play" viewBox="0 0 24 24">
            <path d="M8 5v14l11-7z" />
        </svg>
        <svg id="music-icon-pause" viewBox="0 0 24 24" style="display:none;">
            <path d="M6 4h4v16H6V4zm8 0h4v16h-4V4z" />
        </svg>
    </div>

    <!-- Background Music -->
    <audio id="bg-music" loop>
        <source src="https://cdn.pixabay.com/audio/2024/11/29/audio_f0c0e06965.mp3" type="audio/mpeg">
    </audio>

    <script type="module" src="script.js"></script>
</body>

</html>